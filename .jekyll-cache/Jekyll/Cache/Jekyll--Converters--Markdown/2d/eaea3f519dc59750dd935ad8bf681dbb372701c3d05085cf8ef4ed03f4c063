I"è˜<p>å®¹å™¨æ˜¯åº”ç”¨å±‚çš„æŠ½è±¡ï¼Œå®ƒå°†ä»£ç å’Œä¾èµ–å…³ç³»æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œå¤šä¸ªå®¹å™¨å¯ä»¥åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼Œå¹¶ä¸å…¶ä»–å®¹å™¨å…±äº«æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œæ¯ä¸ªå®¹å™¨åœ¨ç”¨æˆ·ç©ºé—´ä¸­ä½œä¸ºç‹¬ç«‹è¿›ç¨‹è¿è¡Œã€‚</p>

<p>å¦‚æœå°†å®¹å™¨æŠ½è±¡æˆä¸€ç§æ¦‚å¿µï¼Œé‚£ä¹ˆ<code class="language-plaintext highlighter-rouge">Docker</code>ä¾¿æ˜¯è¿™ç§æ¦‚å¿µçš„ä¸€ç§å®ç°æ–¹å¼ã€‚</p>

<p>æ ¹æ®å®˜æ–¹æ–‡æ¡£çš„ä»‹ç»ï¼Œ<code class="language-plaintext highlighter-rouge">Docker</code>å…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>

<ul>
  <li><strong>è½»é‡</strong>ï¼šåœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œçš„å¤šä¸ªDockerå®¹å™¨ï¼Œå¯ä»¥å…±äº«è¿™å°æœºå™¨çš„æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œå®ƒä»¬èƒ½å¤Ÿè¿…é€Ÿå¯åŠ¨ï¼Œåªéœ€å ç”¨å¾ˆå°‘çš„è®¡ç®—å’Œå†…å­˜èµ„æºã€‚</li>
  <li><strong>æ ‡å‡†</strong>ï¼šDockerå®¹å™¨åŸºäºå¼€æ”¾å¼æ ‡å‡†ï¼Œèƒ½å¤Ÿåœ¨æ‰€æœ‰ä¸»æµLinuxç‰ˆæœ¬ã€Microsoft Windowsä»¥åŠåŒ…æ‹¬VMã€è£¸æœºæœåŠ¡å™¨å’Œäº‘åœ¨å†…çš„ä»»ä½•åŸºç¡€è®¾æ–½ä¸Šè¿è¡Œã€‚</li>
  <li><strong>å®‰å…¨</strong>ï¼šDockerèµ‹äºˆåº”ç”¨çš„éš”ç¦»æ€§ä¸ä»…é™äºå½¼æ­¤éš”ç¦»ï¼Œè¿˜ç‹¬ç«‹äºåº•å±‚çš„åŸºç¡€è®¾æ–½ã€‚Dockeré»˜è®¤æä¾›æœ€å¼ºçš„éš”ç¦»ï¼Œå› æ­¤åº”ç”¨å‡ºç°é—®é¢˜ï¼Œä¹Ÿåªæ˜¯å•ä¸ªå®¹å™¨çš„é—®é¢˜ï¼Œè€Œä¸ä¼šæ³¢åŠåˆ°æ•´å°æœºå™¨ã€‚</li>
</ul>

<p>ä¸è¿‡ï¼Œå¯¹äºæ™®é€šå¼€å‘è€…æ¥è¯´ï¼Œæ›´çœ‹é‡çš„æ˜¯å®ƒæä¾›çš„ç¯å¢ƒéš”ç¦»åŠŸèƒ½ã€‚</p>

<hr />

<h4 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h4>

<p><code class="language-plaintext highlighter-rouge">Docker</code>æ˜¯åŸºäº<strong><code class="language-plaintext highlighter-rouge">C/S</code></strong>æ¶æ„çš„ç¨‹åºï¼Œé€šè¿‡ä½¿ç”¨<code class="language-plaintext highlighter-rouge">API</code>æ–¹å¼ç®¡ç†å®¹å™¨ï¼ŒåŸºæœ¬æ¶æ„ï¼š</p>

<p><img src="/img/2019/04/03/01/01.png" alt="" /></p>

<p><strong>é•œåƒ</strong>ç±»ä¼¼ä¸€ä¸ªå¼•å¯¼æ–‡ä»¶ç³»ç»Ÿï¼Œå®¹å™¨è¿è¡Œç¦»ä¸å¼€é•œåƒã€‚</p>

<p><strong>å®¹å™¨</strong>æ›´åƒæ˜¯ç³»ç»Ÿä¸­æŸä¸ªè¿›ç¨‹ï¼Œä½†ä¸ç›´æ¥åœ¨å®¿ä¸»æ‰§è¡Œçš„è¿›ç¨‹ä¸åŒï¼Œå®¹å™¨è¿›ç¨‹è¿è¡Œäºå±äºè‡ªå·±çš„ç‹¬ç«‹å‘½åç©ºé—´ã€‚</p>

<p>é•œåƒä¸å®¹å™¨çš„å…³ç³»ï¼Œå°±åƒæ˜¯ç¨‹åºè®¾è®¡ä¸­çš„ç±»ä¸å®ä¾‹ä¸€æ ·ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">Registry</code>æ˜¯<code class="language-plaintext highlighter-rouge">Docker</code>ç”¨æ¥ç®¡ç†é•œåƒçš„ä»“åº“ï¼Œå¦‚è‘—åçš„å®˜æ–¹ä»“åº“<a href="https://hub.docker.com/">Docker Hub</a>ã€‚</p>

<hr />

<h4 id="åŸºæœ¬ä½¿ç”¨">åŸºæœ¬ä½¿ç”¨</h4>

<p>å®‰è£…å¥½<code class="language-plaintext highlighter-rouge">Docker</code>ä¹‹åï¼Œä¾¿å¯ä»¥é€šè¿‡å‘½ä»¤<code class="language-plaintext highlighter-rouge">docker</code>æ¥æ“ä½œå¯¹åº”çš„é•œåƒã€å®¹å™¨ç­‰ã€‚</p>

<p>æ‹‰å–<code class="language-plaintext highlighter-rouge">ubuntu</code>é•œåƒï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">âœ</span><span class="w">  </span><span class="n">~</span><span class="w"> </span><span class="nx">docker</span><span class="w"> </span><span class="nx">pull</span><span class="w"> </span><span class="nx">ubuntu:latest</span><span class="w">
</span><span class="n">latest:</span><span class="w"> </span><span class="nx">Pulling</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">library/ubuntu</span><span class="w">
</span><span class="mi">898</span><span class="n">c46f3b1a1:</span><span class="w"> </span><span class="nx">Pull</span><span class="w"> </span><span class="nx">complete</span><span class="w">
</span><span class="mi">63366</span><span class="n">dfa0a50:</span><span class="w"> </span><span class="nx">Pull</span><span class="w"> </span><span class="nx">complete</span><span class="w">
</span><span class="mi">041</span><span class="n">d4cd74a92:</span><span class="w"> </span><span class="nx">Pull</span><span class="w"> </span><span class="nx">complete</span><span class="w">
</span><span class="mi">6</span><span class="n">e1bee0f8701:</span><span class="w"> </span><span class="nx">Pull</span><span class="w"> </span><span class="nx">complete</span><span class="w">
</span><span class="n">Digest:</span><span class="w"> </span><span class="nx">sha256:017eef0b616011647b269b5c65826e2e2ebddbe5d1f8c1e56b3599fb14fabec8</span><span class="w">
</span><span class="n">Status:</span><span class="w"> </span><span class="nx">Downloaded</span><span class="w"> </span><span class="nx">newer</span><span class="w"> </span><span class="nx">image</span><span class="w"> </span><span class="nx">for</span><span class="w"> </span><span class="nx">ubuntu:latest</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">pull</code>å­å‘½ä»¤å¯ç”¨äºæ‹‰å–ä»“åº“æˆ–é•œåƒï¼Œä»“åº“ä¸‹å¯ä»¥å­˜åœ¨å¤šä¸ªé•œåƒï¼Œè‹¥éœ€æ˜ç¡®æ‹‰å–æŸä¸ªä»“åº“ä¸‹çš„æŸä¸ªé•œåƒï¼Œå¯é€šè¿‡å¢åŠ <code class="language-plaintext highlighter-rouge">:[tag]</code>æ–¹å¼æ˜ç¡®å…·ä½“çš„é•œåƒã€‚</p>

<p>å…³äºé•œåƒæ“ä½œå¸¸ç”¨å‘½ä»¤ï¼š</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">docker search name</code>ï¼šæœç´¢<code class="language-plaintext highlighter-rouge">Registry</code>ä¸‹åŒ¹é…<code class="language-plaintext highlighter-rouge">name</code>çš„ä»“åº“æˆ–é•œåƒï¼Œ<code class="language-plaintext highlighter-rouge">Docker Hub</code>æä¾›ç½‘é¡µæœç´¢åŠŸèƒ½</li>
  <li><code class="language-plaintext highlighter-rouge">docker rmi image_name</code>ï¼šåˆ é™¤image_nameé•œåƒ</li>
  <li><code class="language-plaintext highlighter-rouge">docker images</code>ï¼šåˆ—å‡ºæ‰€æœ‰é•œåƒ</li>
</ul>

<p>æœ‰äº†é•œåƒï¼Œæ¥ä¸‹æ¥ä¾¿æ˜¯å¯åŠ¨å¯¹åº”çš„å®¹å™¨ï¼Œå¯åŠ¨<code class="language-plaintext highlighter-rouge">ubuntu</code>å®¹å™¨ï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">âœ</span><span class="w">  </span><span class="n">~</span><span class="w"> </span><span class="nx">docker</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-d</span><span class="w"> </span><span class="nt">--name</span><span class="w"> </span><span class="nx">ubuntu</span><span class="w"> </span><span class="nt">-it</span><span class="w"> </span><span class="nx">ubuntu:latest</span><span class="w"> </span><span class="nx">/bin/bash</span><span class="w">
</span><span class="n">b633e8c2adeca72822b8a90fff660b25276cf8df6b67949961063086509bebb2</span><span class="w">
</span></code></pre></div></div>

<p>æ‰§è¡Œå®Œå¯¹åº”çš„å‘½ä»¤åï¼Œå¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œä¼šå¾—åˆ°å¦‚ä¸Šæ‰€ç¤ºçš„ä¸€ä¸ª16è¿›åˆ¶ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²å”¯ä¸€æ ‡è¯†äº†è¯¥å®¹å™¨ã€‚</p>

<p>é€‰é¡¹è¯´æ˜ï¼š</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">-d</code>ï¼šè¡¨ç¤ºå®¹å™¨åå°è¿è¡Œ</li>
  <li><code class="language-plaintext highlighter-rouge">--name</code>ï¼šæŒ‡å®šå®¹å™¨åç§°ï¼Œå®¹å™¨åç§°æˆ–å®¹å™¨IDéƒ½å¯å”¯ä¸€è¡¨ç¤ºä¸€ä¸ªå®¹å™¨å®ä¾‹</li>
  <li><code class="language-plaintext highlighter-rouge">-it</code>ï¼šä¿è¯å®¹å™¨ä¸­<code class="language-plaintext highlighter-rouge">STDIN</code>å¼€å¯å¹¶åˆ†é…ä¸€ä¸ªä¼ª<code class="language-plaintext highlighter-rouge">tty</code></li>
</ul>

<p>å®¹å™¨åˆ›å»ºåï¼Œå³å¯é€šè¿‡<code class="language-plaintext highlighter-rouge">docker ps -a</code>æŸ¥çœ‹å®¹å™¨çŠ¶æ€ï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">âœ</span><span class="w">  </span><span class="n">~</span><span class="w"> </span><span class="nx">docker</span><span class="w"> </span><span class="nx">ps</span><span class="w"> </span><span class="nt">-a</span><span class="w">
</span><span class="n">CONTAINER</span><span class="w"> </span><span class="nx">ID</span><span class="w">        </span><span class="nx">IMAGE</span><span class="w">               </span><span class="nx">COMMAND</span><span class="w">             </span><span class="nx">CREATED</span><span class="w">             </span><span class="nx">STATUS</span><span class="w">              </span><span class="nx">PORTS</span><span class="w">               </span><span class="nx">NAMES</span><span class="w">
</span><span class="n">b633e8c2adec</span><span class="w">        </span><span class="nx">ubuntu:latest</span><span class="w">       </span><span class="s2">"/bin/bash"</span><span class="w">         </span><span class="nx">10</span><span class="w"> </span><span class="nx">minutes</span><span class="w"> </span><span class="nx">ago</span><span class="w">      </span><span class="nx">Up</span><span class="w"> </span><span class="nx">10</span><span class="w"> </span><span class="nx">minutes</span><span class="w">                           </span><span class="nx">ubuntu</span><span class="w">
</span></code></pre></div></div>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡<code class="language-plaintext highlighter-rouge">docker top ubuntu</code>æŸ¥çœ‹å®¹å™¨å†…çš„è¿›ç¨‹ï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">âœ</span><span class="w">  </span><span class="n">~</span><span class="w"> </span><span class="nx">docker</span><span class="w"> </span><span class="nx">top</span><span class="w"> </span><span class="nx">ubuntu</span><span class="w">
</span><span class="n">PID</span><span class="w">                 </span><span class="nx">USER</span><span class="w">                </span><span class="nx">TIME</span><span class="w">                </span><span class="nx">COMMAND</span><span class="w">
</span><span class="mi">16922</span><span class="w">               </span><span class="n">root</span><span class="w">                </span><span class="nx">0:00</span><span class="w">                </span><span class="nx">/bin/bash</span><span class="w">
</span></code></pre></div></div>

<p>å®¹å™¨è¿è¡Œèµ·æ¥åï¼Œå¯é€šè¿‡<code class="language-plaintext highlighter-rouge">docker exec</code>å­å‘½ä»¤è¿›å…¥å®¹å™¨å†…ï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">âœ</span><span class="w">  </span><span class="n">~</span><span class="w"> </span><span class="nx">docker</span><span class="w"> </span><span class="nx">exec</span><span class="w"> </span><span class="nt">-it</span><span class="w"> </span><span class="nx">ubuntu</span><span class="w"> </span><span class="nx">/bin/bash</span><span class="w">
</span><span class="n">root</span><span class="err">@</span><span class="nx">b633e8c2adec:/</span><span class="c">#</span><span class="w">
</span></code></pre></div></div>

<p>æ­¤æ—¶çš„ubuntuå®¹å™¨æ˜¯ä¸ªç²¾ç®€ç‰ˆçš„ubuntuç³»ç»Ÿï¼Œä¸è¿‡ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹è¿˜æ˜¯èƒ½æ­£å¸¸å®‰è£…éœ€è¦è½¯ä»¶ï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">âœ</span><span class="w">  </span><span class="n">~</span><span class="w"> </span><span class="nx">docker</span><span class="w"> </span><span class="nx">exec</span><span class="w"> </span><span class="nt">-it</span><span class="w"> </span><span class="nx">ubuntu</span><span class="w"> </span><span class="nx">/bin/bash</span><span class="w">
</span><span class="n">root</span><span class="err">@</span><span class="nx">b633e8c2adec:/</span><span class="c"># apt-get update &amp;&amp; apt-get install -y redis</span><span class="w">
</span><span class="n">Get:1</span><span class="w"> </span><span class="nx">http://archive.ubuntu.com/ubuntu</span><span class="w"> </span><span class="nx">bionic</span><span class="w"> </span><span class="nx">InRelease</span><span class="w"> </span><span class="p">[</span><span class="mi">242</span><span class="w"> </span><span class="n">kB</span><span class="p">]</span><span class="w">
</span><span class="n">Get:2</span><span class="w"> </span><span class="nx">http://security.ubuntu.com/ubuntu</span><span class="w"> </span><span class="nx">bionic-security</span><span class="w"> </span><span class="nx">InRelease</span><span class="w"> </span><span class="p">[</span><span class="mf">88.7</span><span class="w"> </span><span class="n">kB</span><span class="p">]</span><span class="w">
</span><span class="n">Get:3</span><span class="w"> </span><span class="nx">http://security.ubuntu.com/ubuntu</span><span class="w"> </span><span class="nx">bionic-security/restricted</span><span class="w"> </span><span class="nx">amd64</span><span class="w"> </span><span class="nx">Packages</span><span class="w"> </span><span class="p">[</span><span class="mi">5436</span><span class="w"> </span><span class="n">B</span><span class="p">]</span><span class="w">
</span><span class="n">Get</span><span class="p">:</span><span class="mi">4</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="n">//archive.ubuntu.com/ubuntu</span><span class="w"> </span><span class="nx">bionic-updates</span><span class="w"> </span><span class="nx">InRelease</span><span class="w"> </span><span class="p">[</span><span class="mf">88.7</span><span class="w"> </span><span class="n">kB</span><span class="p">]</span><span class="w">
</span><span class="o">...........</span><span class="w">
</span><span class="n">invoke</span><span class="nt">-rc</span><span class="o">.</span><span class="nf">d</span><span class="p">:</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">determine</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">runlevel</span><span class="w">
</span><span class="n">invoke</span><span class="nt">-rc</span><span class="o">.</span><span class="nf">d</span><span class="p">:</span><span class="w"> </span><span class="n">policy</span><span class="nt">-rc</span><span class="o">.</span><span class="nf">d</span><span class="w"> </span><span class="n">denied</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">start.</span><span class="w">
</span><span class="n">Setting</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">redis</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="p">:</span><span class="mf">4.0</span><span class="o">.</span><span class="nf">9-1ubuntu0</span><span class="o">.</span><span class="nf">1</span><span class="p">)</span><span class="w"> </span><span class="o">...</span><span class="w">
</span></code></pre></div></div>

<p>å¸¸è§æ“ä½œå®¹å™¨å‘½ä»¤ï¼š</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">docker start container_name</code>ï¼šå¯åŠ¨<code class="language-plaintext highlighter-rouge">container_name</code>å®¹å™¨</li>
  <li><code class="language-plaintext highlighter-rouge">docker stop container_name</code>ï¼šåœæ­¢<code class="language-plaintext highlighter-rouge">container_name</code>å®¹å™¨</li>
  <li><code class="language-plaintext highlighter-rouge">docker rm container_name</code>ï¼šåˆ é™¤<code class="language-plaintext highlighter-rouge">container_name</code>å®¹å™¨</li>
  <li><code class="language-plaintext highlighter-rouge">docker cp</code>ï¼šç”¨äºæ‹·è´å®¿ä¸»æœºå’Œå®¹å™¨ä¹‹é—´çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</li>
  <li><code class="language-plaintext highlighter-rouge">docker logs</code>ï¼šæŸ¥çœ‹å®¹å™¨æ—¥å¿—</li>
  <li><code class="language-plaintext highlighter-rouge">docker inspect</code>ï¼šæŸ¥çœ‹å®¹å™¨æ›´è¯¦ç»†çš„ä¿¡æ¯</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">docker</code>æä¾›çš„å­å‘½ä»¤åŸºæœ¬ä¸Šéƒ½å¯é€šè¿‡<code class="language-plaintext highlighter-rouge">docker subcommand -h</code>æ–¹å¼æŸ¥çœ‹å¯¹åº”çš„å¸®åŠ©æ–‡æ¡£ã€‚</p>

<p>ä¸Šé¢è¯´äº†è¿™ä¹ˆå¤šï¼Œä¸è¿‡è²Œä¼¼çœ‹ä¸Šå»æ²¡å•¥ç”¨ã€‚ã€‚ã€‚ã€‚ä¸æ€¥ï¼Œç°åœ¨æ‰åˆšåˆšå¼€å§‹ã€‚</p>

<hr />

<h4 id="dockerfile">Dockerfile</h4>

<p>å®¹å™¨çš„è¿è¡Œç¦»ä¸å¼€é•œåƒï¼Œä¸Šé¢ä¾‹å­ä¸­ä½¿ç”¨çš„éƒ½æ˜¯åˆ«äººåˆ¶ä½œå¥½çš„é•œåƒï¼Œå¦‚æœæœ‰è‡ªå®šä¹‰é•œåƒçš„éœ€æ±‚å‘¢ï¼Œæ¯”æƒ³åœ¨æŸä¸ªå®¹å™¨å†…è¿è¡Œä¸€ä¸ª<code class="language-plaintext highlighter-rouge">Python</code>ç¨‹åºï¼Ÿ</p>

<p><code class="language-plaintext highlighter-rouge">Docker</code>æä¾›äº†ä¸¤ç§æ–¹å¼æ„å»ºé•œåƒï¼š</p>

<ul>
  <li>ä½¿ç”¨<code class="language-plaintext highlighter-rouge">docker commit</code>å‘½ä»¤</li>
  <li>ä½¿ç”¨<code class="language-plaintext highlighter-rouge">docker build</code>å’Œ<code class="language-plaintext highlighter-rouge">Dockerfile</code>æ–‡ä»¶</li>
</ul>

<p>è¿è¡Œ<code class="language-plaintext highlighter-rouge">docker exec -it ubuntu /bin/bash</code>å‘½ä»¤ï¼Œå®‰è£…<code class="language-plaintext highlighter-rouge">vim</code>ã€<code class="language-plaintext highlighter-rouge">python3-dev</code>:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">âœ</span><span class="w">  </span><span class="n">~</span><span class="w"> </span><span class="nx">docker</span><span class="w"> </span><span class="nx">exec</span><span class="w"> </span><span class="nt">-it</span><span class="w"> </span><span class="nx">ubuntu</span><span class="w"> </span><span class="nx">/bin/bash</span><span class="w">
</span><span class="n">root</span><span class="err">@</span><span class="nx">b633e8c2adec:/</span><span class="c"># apt-get install -y vim &amp;&amp; apt-get install -y python3-dev</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">/</code>ç›®å½•ä¸‹æ·»åŠ <code class="language-plaintext highlighter-rouge">test.py</code>æ–‡ä»¶:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">http.server</span> <span class="kn">import</span> <span class="n">HTTPServer</span><span class="p">,</span> <span class="n">BaseHTTPRequestHandler</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="k">class</span> <span class="nc">Handler</span><span class="p">(</span><span class="n">BaseHTTPRequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">do_GET</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">send_response</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">send_header</span><span class="p">(</span><span class="s">'Content-type'</span><span class="p">,</span> <span class="s">'application/json'</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">end_headers</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">wfile</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span>
            <span class="s">'host'</span><span class="p">:</span> <span class="s">"localhost"</span><span class="p">,</span>
            <span class="s">"message"</span><span class="p">:</span> <span class="s">"This is a dockerfile test."</span>
        <span class="p">}).</span><span class="n">encode</span><span class="p">())</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">server</span> <span class="o">=</span> <span class="n">HTTPServer</span><span class="p">((</span><span class="s">'0.0.0.0'</span><span class="p">,</span> <span class="mi">8000</span><span class="p">),</span> <span class="n">Handler</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"server starting....."</span><span class="p">)</span>
    <span class="n">server</span><span class="p">.</span><span class="n">serve_forever</span><span class="p">()</span>
</code></pre></div></div>

<p>é€€å‡ºå®¹å™¨ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">âœ</span><span class="w">  </span><span class="n">docker</span><span class="w"> </span><span class="nx">commit</span><span class="w"> </span><span class="nx">ubuntu</span><span class="w"> </span><span class="nx">skymemory/demo:0.1</span><span class="w">
</span><span class="n">sha256:b6396664ec770be583973ef0e09754be000ea6d14ff1dc76feedaacccb6514ce</span><span class="w">
</span><span class="err">âœ</span><span class="w">  </span><span class="nx">docker</span><span class="w"> </span><span class="nx">images</span><span class="w">
</span><span class="n">REPOSITORY</span><span class="w">                 </span><span class="nx">TAG</span><span class="w">                 </span><span class="nx">IMAGE</span><span class="w"> </span><span class="nx">ID</span><span class="w">            </span><span class="nx">CREATED</span><span class="w">             </span><span class="nx">SIZE</span><span class="w">
</span><span class="n">skymemory/demo</span><span class="w">             </span><span class="nx">0.1</span><span class="w">                 </span><span class="nx">b6396664ec77</span><span class="w">        </span><span class="nx">9</span><span class="w"> </span><span class="nx">seconds</span><span class="w"> </span><span class="nx">ago</span><span class="w">       </span><span class="nx">358MB</span><span class="w">
</span></code></pre></div></div>

<p>æ­¤æ—¶ï¼Œå¯¹åº”çš„<code class="language-plaintext highlighter-rouge">python</code>ç¯å¢ƒé•œåƒå°±åˆ¶ä½œå®Œæˆï¼Œå¯åŠ¨å¯¹åº”å®¹å™¨åŠéªŒè¯ï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">âœ</span><span class="w">  </span><span class="n">~</span><span class="w"> </span><span class="nx">docker</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-d</span><span class="w"> </span><span class="nt">--name</span><span class="w"> </span><span class="nx">httpd</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="nx">9999:8000</span><span class="w"> </span><span class="nx">skymemory/demo:0.1</span><span class="w"> </span><span class="nx">/bin/sh</span><span class="w"> </span><span class="nt">-c</span><span class="w"> </span><span class="s2">"python3 test.py"</span><span class="w">
</span><span class="n">ce31e6c3af48c4220e8619655eb09915bc4800b533d17d77526e0b14f646900f</span><span class="w">
</span><span class="err">âœ</span><span class="w">  </span><span class="nx">~</span><span class="w"> </span><span class="nx">docker</span><span class="w"> </span><span class="nx">top</span><span class="w"> </span><span class="nx">httpd</span><span class="w">
</span><span class="n">PID</span><span class="w">                 </span><span class="nx">USER</span><span class="w">                </span><span class="nx">TIME</span><span class="w">                </span><span class="nx">COMMAND</span><span class="w">
</span><span class="mi">19106</span><span class="w">               </span><span class="n">root</span><span class="w">                </span><span class="nx">0:00</span><span class="w">                </span><span class="nx">/bin/sh</span><span class="w"> </span><span class="nt">-c</span><span class="w"> </span><span class="nx">python3</span><span class="w"> </span><span class="nx">test.py</span><span class="w">
</span><span class="mi">19150</span><span class="w">               </span><span class="n">root</span><span class="w">                </span><span class="nx">0:00</span><span class="w">                </span><span class="nx">python3</span><span class="w"> </span><span class="nx">test.py</span><span class="w">
</span><span class="err">âœ</span><span class="w">  </span><span class="n">~</span><span class="w"> </span><span class="nx">http</span><span class="w"> </span><span class="nx">http://localhost:9999/home</span><span class="w">
</span><span class="n">HTTP/1.0</span><span class="w"> </span><span class="nx">200</span><span class="w"> </span><span class="nx">OK</span><span class="w">
</span><span class="n">Content-type:</span><span class="w"> </span><span class="nx">application/json</span><span class="w">
</span><span class="n">Date:</span><span class="w"> </span><span class="nx">Wed</span><span class="p">,</span><span class="w"> </span><span class="nx">03</span><span class="w"> </span><span class="nx">Apr</span><span class="w"> </span><span class="nx">2019</span><span class="w"> </span><span class="nx">11:21:11</span><span class="w"> </span><span class="nx">GMT</span><span class="w">
</span><span class="n">Server:</span><span class="w"> </span><span class="nx">BaseHTTP/0.6</span><span class="w"> </span><span class="nx">Python/3.6.7</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a dockerfile test."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>ç°åœ¨å†çœ‹çœ‹é€šè¿‡<code class="language-plaintext highlighter-rouge">Dockerfile</code>æ–‡ä»¶å’Œ<code class="language-plaintext highlighter-rouge">docker build</code>æ„å»ºé•œåƒè¿‡ç¨‹ã€‚</p>

<p>åˆ›å»ºç›®å½•<code class="language-plaintext highlighter-rouge">df</code>ï¼Œç›®å½•ä¸‹åˆ›å»º<code class="language-plaintext highlighter-rouge">Dockerfile</code>å’Œ<code class="language-plaintext highlighter-rouge">test.py</code>æ–‡ä»¶ï¼Œ<code class="language-plaintext highlighter-rouge">test.py</code>æ–‡ä»¶å†…å®¹ä¸ä¹‹å‰ä¸€è‡´ï¼Œ<code class="language-plaintext highlighter-rouge">Dockerfile</code>æ–‡ä»¶å†…å®¹ï¼š</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> ubuntu:latest</span>
<span class="k">RUN </span>apt-get update
<span class="k">RUN </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> python3-dev
<span class="k">ADD</span><span class="s"> test.py /</span>
<span class="k">EXPOSE</span><span class="s"> 8000</span>
<span class="k">CMD</span><span class="s"> ["python3", "test.py"]</span>
</code></pre></div></div>

<p>åœ¨<code class="language-plaintext highlighter-rouge">df</code>ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">âœ</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="nx">build</span><span class="w"> </span><span class="nt">-t</span><span class="w"> </span><span class="nx">skymemory/demo:0.2</span><span class="w"> </span><span class="o">.</span><span class="w">
</span><span class="n">Sending</span><span class="w"> </span><span class="nx">build</span><span class="w"> </span><span class="nx">context</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Docker</span><span class="w"> </span><span class="nx">daemon</span><span class="w">  </span><span class="nx">3.584kB</span><span class="w">
</span><span class="n">Step</span><span class="w"> </span><span class="nx">1/6</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nx">FROM</span><span class="w"> </span><span class="nx">ubuntu:latest</span><span class="w">
 </span><span class="o">---</span><span class="err">&gt;</span><span class="w"> </span><span class="mi">94</span><span class="n">e814e2efa8</span><span class="w">
</span><span class="nx">Step</span><span class="w"> </span><span class="nx">2/6</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nx">RUN</span><span class="w"> </span><span class="nx">apt-get</span><span class="w"> </span><span class="nx">update</span><span class="w">
</span><span class="o">.....</span><span class="w">
</span><span class="n">Successfully</span><span class="w"> </span><span class="nx">built</span><span class="w"> </span><span class="nx">4b49663acdc2</span><span class="w">
</span><span class="n">Successfully</span><span class="w"> </span><span class="nx">tagged</span><span class="w"> </span><span class="nx">skymemory/demo:0.2</span><span class="w">
</span></code></pre></div></div>

<p>é•œåƒæˆåŠŸæ„å»ºåï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">âœ</span><span class="w">  </span><span class="n">docker</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-d</span><span class="w"> </span><span class="nt">--name</span><span class="w"> </span><span class="nx">httpd-1</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="nx">8888:8000</span><span class="w"> </span><span class="nx">skymemory/demo:0.2</span><span class="w">
</span><span class="n">e220ded3a673bd74539a2b2ca911b9926d9e0d8d4a49444d3b90a388d5c8a0dc</span><span class="w">
</span><span class="err">âœ</span><span class="w">  </span><span class="nx">docker</span><span class="w"> </span><span class="nx">top</span><span class="w"> </span><span class="nx">httpd-1</span><span class="w">
</span><span class="n">PID</span><span class="w">                 </span><span class="nx">USER</span><span class="w">                </span><span class="nx">TIME</span><span class="w">                </span><span class="nx">COMMAND</span><span class="w">
</span><span class="mi">20418</span><span class="w">               </span><span class="n">root</span><span class="w">                </span><span class="nx">0:00</span><span class="w">                </span><span class="nx">python3</span><span class="w"> </span><span class="nx">test.py</span><span class="w">
</span><span class="err">âœ</span><span class="w">  </span><span class="n">http</span><span class="w"> </span><span class="nx">http://localhost:8888/home</span><span class="w">
</span><span class="n">HTTP/1.0</span><span class="w"> </span><span class="nx">200</span><span class="w"> </span><span class="nx">OK</span><span class="w">
</span><span class="n">Content-type:</span><span class="w"> </span><span class="nx">application/json</span><span class="w">
</span><span class="n">Date:</span><span class="w"> </span><span class="nx">Wed</span><span class="p">,</span><span class="w"> </span><span class="nx">03</span><span class="w"> </span><span class="nx">Apr</span><span class="w"> </span><span class="nx">2019</span><span class="w"> </span><span class="nx">11:37:19</span><span class="w"> </span><span class="nx">GMT</span><span class="w">
</span><span class="n">Server:</span><span class="w"> </span><span class="nx">BaseHTTP/0.6</span><span class="w"> </span><span class="nx">Python/3.6.7</span><span class="w">

</span><span class="p">{</span><span class="w">
    </span><span class="s2">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a dockerfile test."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Dockerfile</code>åŸºäº<code class="language-plaintext highlighter-rouge">DSL</code>è¯­æ³•çš„æŒ‡ä»¤æ„å»ºä¸€ä¸ª<code class="language-plaintext highlighter-rouge">Docker</code>é•œåƒï¼Œå¸¸ç”¨çš„ä¸€äº›æŒ‡ä»¤æ•´ç†ï¼š</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">CMD</code>ï¼šæŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„å‘½ä»¤</li>
  <li><code class="language-plaintext highlighter-rouge">RUN</code>ï¼šæŒ‡å®šé•œåƒè¢«æ„å»ºæ—¶è¦è¿è¡Œçš„å‘½ä»¤</li>
  <li><code class="language-plaintext highlighter-rouge">WORKDIR</code>ï¼šè®¾ç½®å·¥ä½œç›®å½•ï¼Œç±»ä¼¼<code class="language-plaintext highlighter-rouge">cd</code></li>
  <li><code class="language-plaintext highlighter-rouge">ENV</code>ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæ ¼å¼ä¸º<code class="language-plaintext highlighter-rouge">ENV name value</code></li>
  <li><code class="language-plaintext highlighter-rouge">COPY</code>ï¼šæ„å»ºæ—¶ç”¨äºå¤åˆ¶æœ¬åœ°ç›®å½•æˆ–æ–‡ä»¶åˆ°å®¹å™¨</li>
  <li><code class="language-plaintext highlighter-rouge">EXPOSE</code>ï¼šæŒ‡å®šæš´éœ²ç«¯å£</li>
  <li><code class="language-plaintext highlighter-rouge">VOLUME</code>ï¼šæŒ‡å®šæŒ‚è½½å·ï¼ˆåç»­ä¼šè¯´æ˜ï¼‰</li>
</ul>

<hr />

<h4 id="volume">Volume</h4>

<p>åœ¨å¼€å‘é˜¶æ®µä»£ç é¢‘ç¹æ”¹åŠ¨ä»£ç æ˜¯å¾ˆå¸¸è§çš„äº‹ï¼Œå¦‚æœé€šè¿‡ä¸Šè¿°æ„å»ºé•œåƒçš„æ–¹å¼è¿è¡Œé¡¹ç›®ä»£ç ï¼Œæ¯æ›´æ”¹ä¸€æ¬¡å°±éœ€è¦é‡æ–°æ„å»ºé•œåƒï¼Œæœªå…æ˜¾å¾—ä½æ•ˆã€‚</p>

<p><code class="language-plaintext highlighter-rouge">Docker</code>ä¸­å¼•å…¥äº†<code class="language-plaintext highlighter-rouge">Volume</code>ï¼Œåˆç§°â€å·â€ï¼Œå¯ç”¨äºå°†å®¹å™¨ä¸­çš„ç›®å½•æˆ–æ–‡ä»¶æŒ‚è½½åˆ°å¤–éƒ¨æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™æ ·å¤–éƒ¨æ–‡ä»¶ç³»ç»Ÿçš„æ›´æ”¹å°±èƒ½ååº”åˆ°å®¹å™¨å†…æ–‡ä»¶ç³»ç»Ÿä¸Šã€‚</p>

<p><code class="language-plaintext highlighter-rouge">Volume</code>åœ¨<code class="language-plaintext highlighter-rouge">Dockerfile</code>ä¸­é€šè¿‡<code class="language-plaintext highlighter-rouge">VOLUME</code>æŒ‡ä»¤æŒ‡å®šï¼Œå¦‚ï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">VOLUME</span><span class="w"> </span><span class="p">[</span><span class="s2">"/data1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/data2"</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>ä¹Ÿå¯åœ¨<code class="language-plaintext highlighter-rouge">docker run</code>å‘½ä»¤ä¸­æŒ‡å®šï¼š</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">docker</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-d</span><span class="w"> </span><span class="nt">--name</span><span class="w"> </span><span class="nx">httpd-2</span><span class="w"> </span><span class="nt">-v</span><span class="w"> </span><span class="bp">$PWD</span><span class="nx">/test.py:/test.py</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="nx">8899:8000</span><span class="w"> </span><span class="nx">skymemory/demo:0.2</span><span class="w">
</span></code></pre></div></div>

<p>æ¯å½“æ›´æ–°å¤–éƒ¨æ–‡ä»¶ç³»ç»Ÿï¼Œæ ¹æ®<code class="language-plaintext highlighter-rouge">docker restart</code>å‘½ä»¤é‡å¯å¯¹åº”çš„å®¹å™¨å³å¯ã€‚</p>

<p>å½“ç„¶ï¼Œ<code class="language-plaintext highlighter-rouge">Volume</code>çš„åŠŸèƒ½å¹¶ä¸ä»…é™äºæ­¤ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</p>

<hr />

<h4 id="link">link</h4>

<p>ç°å®åœºæ™¯ä¸­ï¼Œä¸€ä¸ªæœåŠ¡å¾€å¾€éœ€è¦å¤šä¸ªå®¹å™¨ï¼Œå¦‚<code class="language-plaintext highlighter-rouge">mongodb</code>å®¹å™¨ã€<code class="language-plaintext highlighter-rouge">redis</code>å®¹å™¨ã€<code class="language-plaintext highlighter-rouge">mysql</code>å®¹å™¨ç­‰ã€‚</p>

<p>ç”±äºå®¹å™¨æ¯æ¬¡é‡å¯å¯¹åº”çš„IPåœ°å€éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿™æ ·å°±å¯¼è‡´äº†æŸä¸ªå®¹å™¨é‡å¯åï¼Œä¾èµ–è¯¥å®¹å™¨çš„æœåŠ¡å°±éœ€è¦æ›´æ¢è°ƒç”¨IPåœ°å€ï¼Œæå¤§çš„ä¸æ–¹ä¾¿ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">Docker</code>æä¾›äº†<code class="language-plaintext highlighter-rouge">link</code>åŠŸèƒ½æ¥è§£å†³è¯¸å¦‚æ­¤ç±»é—®é¢˜ï¼Œè¿è¡Œ<code class="language-plaintext highlighter-rouge">docker run</code>å‘½ä»¤æ—¶å¯é€šè¿‡â€”linké€‰é¡¹æŒ‡æ˜è¿æ¥å®¹å™¨åŠåˆ«åï¼Œå¦‚:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">docker</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">--link</span><span class="w"> </span><span class="nx">redis:cache</span><span class="w"> </span><span class="nt">--rm</span><span class="w"> </span><span class="nt">-it</span><span class="w"> </span><span class="nx">ubuntu</span><span class="w"> </span><span class="nx">/bin/bash</span><span class="w">
</span></code></pre></div></div>

<p>ä¸Šè¿°å‘½ä»¤æŒ‡å®š<code class="language-plaintext highlighter-rouge">link</code>å®¹å™¨åä¸º<code class="language-plaintext highlighter-rouge">redis</code>ï¼Œåˆ«åä¸º<code class="language-plaintext highlighter-rouge">cache</code>ï¼Œ<code class="language-plaintext highlighter-rouge">Docker</code>å†…éƒ¨ä¼šåœ¨å½“å‰å®¹å™¨<code class="language-plaintext highlighter-rouge">/etc/hosts</code>æ–‡ä»¶ä¸­æ·»åŠ <code class="language-plaintext highlighter-rouge">cache</code>åˆ°å¯¹åº”IPçš„è½¬æ¢ï¼Œå¦å¤–è¿˜ä¼šå°†<code class="language-plaintext highlighter-rouge">redis</code>å®¹å™¨ä¸­çš„ç¯å¢ƒå˜é‡å¯¼å…¥æœ¬å®¹å™¨ï¼Œæ ¹æ®è¿™ä¸¤ç‚¹å¯ä»¥è·çŸ¥<code class="language-plaintext highlighter-rouge">link</code>å®¹å™¨ä¿¡æ¯ã€‚</p>

<hr />

<h4 id="docker-compose">docker-compose</h4>

<p>è¿˜æ˜¯ä¹‹å‰çš„é—®é¢˜ï¼Œä¸€ä¸ªæœåŠ¡å¾€å¾€æ¶‰åŠå¤šä¸ªå®¹å™¨ï¼Œå¦‚ç¼“å­˜ã€æŒä¹…åŒ–å­˜å‚¨ã€<code class="language-plaintext highlighter-rouge">oss</code>å­˜å‚¨ã€æœç´¢ç­‰ï¼Œäººå·¥éƒ¨ç½²å„ä¸ªå®¹å™¨æ— ç–‘åŠ å¤§äººåŠ›æˆæœ¬ã€‚</p>

<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå·¥å…·æ¥ç®¡ç†å¤šä¸ªå®¹å™¨ï¼Œè¿™ä¸ªå·¥å…·éœ€è¦æä¾›æœåŠ¡ç¼–æ’çš„åŠŸèƒ½ï¼Œè¿™å°±æ˜¯<code class="language-plaintext highlighter-rouge">docker-compose</code>ã€‚</p>

<p>é€šå¸¸æƒ…å†µä¸‹å®‰è£…å¥½<code class="language-plaintext highlighter-rouge">Docker</code>åï¼Œé»˜è®¤ä¼šå®‰è£…<code class="language-plaintext highlighter-rouge">docker-compose</code>å·¥å…·ï¼Œ<code class="language-plaintext highlighter-rouge">docker-compose</code>é…ç½®æ–‡ä»¶æ ¼å¼ä¸º<code class="language-plaintext highlighter-rouge">yml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cache</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">redis</span>

<span class="na">httpd</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">test:0.1</span>
  <span class="na">links</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">cache</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">8888:8000"</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/Users/memorysky/demo:/tmp</span>
</code></pre></div></div>

<p>å®šä¹‰å¥½æœåŠ¡<code class="language-plaintext highlighter-rouge">yml</code>æ–‡ä»¶åï¼Œå³å¯é€šè¿‡<code class="language-plaintext highlighter-rouge">docker-compose up -d</code>æ–¹å¼å¯åŠ¨æœåŠ¡ã€‚</p>

<p>åŸºæœ¬ä¸Šå¹³æ—¶è‡ªå·±ä¼šç”¨åˆ°çš„å†…å®¹å¤§ä½“å°±è¿™äº›ï¼Œå…¶ä»–çš„å†…å®¹ç”¨åˆ°çš„æ—¶å€™åœ¨è¯´å§ã€‚</p>

:ET